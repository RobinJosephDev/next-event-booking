{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///var/www/html/Robin/next-event-booking/frontend/src/lib/apiClient.ts"],"sourcesContent":["import { Event, LoginResponse, RegisterResponse, Booking } from \"../types\";\n\nconst API_URL = \"/api\";\n\n// Helper for auth headers\nconst headers = () => ({\n  \"Content-Type\": \"application/json\",\n  Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\n});\n\n// ✅ Fetch all events (upcoming only)\nexport const getAllEvents = async (): Promise<Event[]> => {\n  const res = await fetch(`${API_URL}/events`, { cache: \"no-store\" });\n  if (!res.ok) throw new Error(\"Failed to fetch events\");\n\n  const data: Event[] = await res.json();\n\n  return data\n    .filter((event) => new Date(event.date) >= new Date())\n    .sort(\n      (a, b) => new Date(b.date).getTime() - new Date(a.date).getTime()\n    );\n};\n\n// ✅ Fetch a single event by ID\nexport const getEventById = async (id: string): Promise<Event> => {\n  const res = await fetch(`${API_URL}/events/${id}`, { headers: headers() });\n  if (!res.ok) throw new Error(\"Failed to fetch event\");\n  return res.json();\n};\n\n// ✅ Login\nexport const loginUser = async (\n  email: string,\n  password: string\n): Promise<LoginResponse> => {\n  const res = await fetch(`${API_URL}/auth/login`, {\n    method: \"POST\",\n    headers: { \"Content-Type\": \"application/json\" },\n    body: JSON.stringify({ email, password }),\n  });\n  if (!res.ok) throw new Error(\"Login failed\");\n  return res.json();\n};\n\n// ✅ Register\nexport const registerUser = async (\n  name: string,\n  email: string,\n  password: string\n): Promise<RegisterResponse> => {\n  const res = await fetch(`${API_URL}/auth/register`, {\n    method: \"POST\",\n    headers: { \"Content-Type\": \"application/json\" },\n    body: JSON.stringify({ name, email, password }),\n  });\n  if (!res.ok) throw new Error(\"Registration failed\");\n  return res.json();\n};\n\n// ✅ Get bookings for a user\nexport const getUserBookings = async (\n  userId: number\n): Promise<Booking[]> => {\n  const res = await fetch(`${API_URL}/bookings?userId=${userId}`, {\n    headers: headers(),\n    cache: \"no-store\",\n  });\n\n  if (!res.ok) throw new Error(\"Failed to fetch bookings\");\n  return res.json();\n};\n\n// ✅ Create a booking\nexport const createBooking = async (\n  eventId: number,\n  tickets: number\n): Promise<Booking> => {\n  const res = await fetch(`${API_URL}/bookings`, {\n    method: \"POST\",\n    headers: headers(),\n    body: JSON.stringify({ eventId, tickets }),\n  });\n\n  if (!res.ok) throw new Error(\"Failed to book event\");\n  return res.json();\n};\n"],"names":[],"mappings":";;;;;;;;;;;;;;AAEA,MAAM,UAAU;AAEhB,0BAA0B;AAC1B,MAAM,UAAU,IAAM,CAAC;QACrB,gBAAgB;QAChB,eAAe,CAAC,OAAO,EAAE,aAAa,OAAO,CAAC,UAAU;IAC1D,CAAC;AAGM,MAAM,eAAe;IAC1B,MAAM,MAAM,MAAM,MAAM,GAAG,QAAQ,OAAO,CAAC,EAAE;QAAE,OAAO;IAAW;IACjE,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,IAAI,MAAM;IAE7B,MAAM,OAAgB,MAAM,IAAI,IAAI;IAEpC,OAAO,KACJ,MAAM,CAAC,CAAC,QAAU,IAAI,KAAK,MAAM,IAAI,KAAK,IAAI,QAC9C,IAAI,CACH,CAAC,GAAG,IAAM,IAAI,KAAK,EAAE,IAAI,EAAE,OAAO,KAAK,IAAI,KAAK,EAAE,IAAI,EAAE,OAAO;AAErE;AAGO,MAAM,eAAe,OAAO;IACjC,MAAM,MAAM,MAAM,MAAM,GAAG,QAAQ,QAAQ,EAAE,IAAI,EAAE;QAAE,SAAS;IAAU;IACxE,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,IAAI,MAAM;IAC7B,OAAO,IAAI,IAAI;AACjB;AAGO,MAAM,YAAY,OACvB,OACA;IAEA,MAAM,MAAM,MAAM,MAAM,GAAG,QAAQ,WAAW,CAAC,EAAE;QAC/C,QAAQ;QACR,SAAS;YAAE,gBAAgB;QAAmB;QAC9C,MAAM,KAAK,SAAS,CAAC;YAAE;YAAO;QAAS;IACzC;IACA,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,IAAI,MAAM;IAC7B,OAAO,IAAI,IAAI;AACjB;AAGO,MAAM,eAAe,OAC1B,MACA,OACA;IAEA,MAAM,MAAM,MAAM,MAAM,GAAG,QAAQ,cAAc,CAAC,EAAE;QAClD,QAAQ;QACR,SAAS;YAAE,gBAAgB;QAAmB;QAC9C,MAAM,KAAK,SAAS,CAAC;YAAE;YAAM;YAAO;QAAS;IAC/C;IACA,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,IAAI,MAAM;IAC7B,OAAO,IAAI,IAAI;AACjB;AAGO,MAAM,kBAAkB,OAC7B;IAEA,MAAM,MAAM,MAAM,MAAM,GAAG,QAAQ,iBAAiB,EAAE,QAAQ,EAAE;QAC9D,SAAS;QACT,OAAO;IACT;IAEA,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,IAAI,MAAM;IAC7B,OAAO,IAAI,IAAI;AACjB;AAGO,MAAM,gBAAgB,OAC3B,SACA;IAEA,MAAM,MAAM,MAAM,MAAM,GAAG,QAAQ,SAAS,CAAC,EAAE;QAC7C,QAAQ;QACR,SAAS;QACT,MAAM,KAAK,SAAS,CAAC;YAAE;YAAS;QAAQ;IAC1C;IAEA,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,IAAI,MAAM;IAC7B,OAAO,IAAI,IAAI;AACjB"}},
    {"offset": {"line": 95, "column": 0}, "map": {"version":3,"sources":["file:///var/www/html/Robin/next-event-booking/frontend/src/context/AuthContext.tsx"],"sourcesContent":["\"use client\";\nimport { createContext, useState, useEffect, ReactNode } from \"react\";\nimport { loginUser, registerUser as regUser } from \"../lib/apiClient\";\nimport { User } from \"../types\";\n\ninterface AuthContextType {\n  user: User | null;\n  login: (email: string, password: string) => Promise<void>;\n  registerUser: (\n    name: string,\n    email: string,\n    password: string\n  ) => Promise<void>;\n  logout: () => void;\n}\n\nexport const AuthContext = createContext<AuthContextType>({\n  user: null,\n  login: async () => {},\n  registerUser: async () => {},\n  logout: () => {},\n});\n\nexport function AuthProvider({ children }: { children: ReactNode }) {\n  const [user, setUser] = useState<User | null>(null);\n\n  useEffect(() => {\n    const stored = localStorage.getItem(\"user\");\n    if (stored) setUser(JSON.parse(stored));\n  }, []);\n\n  const login = async (email: string, password: string) => {\n    const res = await loginUser(email, password);\n    setUser(res.user);\n    localStorage.setItem(\"user\", JSON.stringify(res.user));\n    localStorage.setItem(\"token\", res.token);\n  };\n\n  const registerUser = async (\n    name: string,\n    email: string,\n    password: string\n  ) => {\n    const res = await regUser(name, email, password);\n    setUser(res.user);\n    localStorage.setItem(\"user\", JSON.stringify(res.user));\n    localStorage.setItem(\"token\", res.token);\n  };\n\n  const logout = () => {\n    setUser(null);\n    localStorage.clear();\n  };\n\n  return (\n    <AuthContext.Provider value={{ user, login, registerUser, logout }}>\n      {children}\n    </AuthContext.Provider>\n  );\n}\n"],"names":[],"mappings":";;;;;;;AACA;AACA;;;AAFA;;;AAgBO,MAAM,4BAAc,IAAA,0LAAa,EAAkB;IACxD,MAAM;IACN,OAAO,WAAa;IACpB,cAAc,WAAa;IAC3B,QAAQ,KAAO;AACjB;AAEO,SAAS,aAAa,EAAE,QAAQ,EAA2B;;IAChE,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,qLAAQ,EAAc;IAE9C,IAAA,sLAAS;kCAAC;YACR,MAAM,SAAS,aAAa,OAAO,CAAC;YACpC,IAAI,QAAQ,QAAQ,KAAK,KAAK,CAAC;QACjC;iCAAG,EAAE;IAEL,MAAM,QAAQ,OAAO,OAAe;QAClC,MAAM,MAAM,MAAM,IAAA,mJAAS,EAAC,OAAO;QACnC,QAAQ,IAAI,IAAI;QAChB,aAAa,OAAO,CAAC,QAAQ,KAAK,SAAS,CAAC,IAAI,IAAI;QACpD,aAAa,OAAO,CAAC,SAAS,IAAI,KAAK;IACzC;IAEA,MAAM,eAAe,OACnB,MACA,OACA;QAEA,MAAM,MAAM,MAAM,IAAA,sJAAO,EAAC,MAAM,OAAO;QACvC,QAAQ,IAAI,IAAI;QAChB,aAAa,OAAO,CAAC,QAAQ,KAAK,SAAS,CAAC,IAAI,IAAI;QACpD,aAAa,OAAO,CAAC,SAAS,IAAI,KAAK;IACzC;IAEA,MAAM,SAAS;QACb,QAAQ;QACR,aAAa,KAAK;IACpB;IAEA,qBACE,yMAAC,YAAY,QAAQ;QAAC,OAAO;YAAE;YAAM;YAAO;YAAc;QAAO;kBAC9D;;;;;;AAGP;GApCgB;KAAA"}},
    {"offset": {"line": 165, "column": 0}, "map": {"version":3,"sources":["file:///var/www/html/Robin/next-event-booking/frontend/src/components/Navbar.tsx"],"sourcesContent":["\"use client\";\n\nimport Link from \"next/link\";\nimport { useContext } from \"react\";\nimport { AuthContext } from \"../context/AuthContext\";\n\nconst Navbar = () => {\n  const { user, logout } = useContext(AuthContext);\n\n  return (\n    <nav className=\"bg-blue-600 text-white p-4 flex justify-between items-center\">\n      <Link href=\"/\" className=\"text-xl font-bold\">\n        EventBook\n      </Link>\n\n      <div className=\"space-x-4\">\n        <Link href=\"/events\">Events</Link>\n        {user ? (\n          <>\n            <Link href=\"/dashboard\">Dashboard</Link>\n            <button onClick={logout} className=\"bg-red-500 px-3 py-1 rounded\">\n              Logout\n            </button>\n          </>\n        ) : (\n          <>\n            <Link href=\"/login\">Login</Link>\n            <Link href=\"/register\">Register</Link>\n          </>\n        )}\n      </div>\n    </nav>\n  );\n};\n\nexport default Navbar;\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;;;AAJA;;;;AAMA,MAAM,SAAS;;IACb,MAAM,EAAE,IAAI,EAAE,MAAM,EAAE,GAAG,IAAA,uLAAU,EAAC,4JAAW;IAE/C,qBACE,yMAAC;QAAI,WAAU;;0BACb,yMAAC,sLAAI;gBAAC,MAAK;gBAAI,WAAU;0BAAoB;;;;;;0BAI7C,yMAAC;gBAAI,WAAU;;kCACb,yMAAC,sLAAI;wBAAC,MAAK;kCAAU;;;;;;oBACpB,qBACC;;0CACE,yMAAC,sLAAI;gCAAC,MAAK;0CAAa;;;;;;0CACxB,yMAAC;gCAAO,SAAS;gCAAQ,WAAU;0CAA+B;;;;;;;qDAKpE;;0CACE,yMAAC,sLAAI;gCAAC,MAAK;0CAAS;;;;;;0CACpB,yMAAC,sLAAI;gCAAC,MAAK;0CAAY;;;;;;;;;;;;;;;;;;;;AAMnC;GA3BM;KAAA;uCA6BS"}}]
}