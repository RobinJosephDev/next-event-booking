{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///var/www/html/Robin/next-event-booking/frontend/src/components/EventForm.tsx"],"sourcesContent":["import { useState, FormEvent } from \"react\";\n\ninterface EventFormProps {\n  onSubmit: (data: EventFormData) => void;\n  initialData?: EventFormData;\n}\n\nexport interface EventFormData {\n  title: string;\n  description: string;\n  date: string;\n  venue: string;\n  price: number;\n  capacity: number;\n}\n\nconst EventForm = ({ onSubmit, initialData }: EventFormProps) => {\n  const [formData, setFormData] = useState<EventFormData>({\n    title: initialData?.title || \"\",\n    description: initialData?.description || \"\",\n    date: initialData?.date || new Date().toISOString().split(\"T\")[0],\n    venue: initialData?.venue || \"\",\n    price: initialData?.price || 0,\n    capacity: initialData?.capacity || 1,\n  });\n\n  const handleChange = (\n    e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>\n  ) => {\n    const { name, value } = e.target;\n    setFormData({\n      ...formData,\n      [name]: name === \"price\" || name === \"capacity\" ? Number(value) : value,\n    });\n  };\n\n  const handleSubmit = (e: FormEvent) => {\n    e.preventDefault();\n    onSubmit(formData);\n  };\n\n  return (\n    <form onSubmit={handleSubmit} className=\"space-y-4 max-w-md mx-auto\">\n      <input\n        type=\"text\"\n        name=\"title\"\n        placeholder=\"Event Title\"\n        value={formData.title}\n        onChange={handleChange}\n        className=\"w-full border p-2 rounded\"\n        required\n      />\n      <textarea\n        name=\"description\"\n        placeholder=\"Description\"\n        value={formData.description}\n        onChange={handleChange}\n        className=\"w-full border p-2 rounded\"\n      />\n      <input\n        type=\"date\"\n        name=\"date\"\n        value={formData.date}\n        onChange={handleChange}\n        className=\"w-full border p-2 rounded\"\n        required\n      />\n      <input\n        type=\"text\"\n        name=\"venue\"\n        placeholder=\"Venue\"\n        value={formData.venue}\n        onChange={handleChange}\n        className=\"w-full border p-2 rounded\"\n        required\n      />\n      <input\n        type=\"number\"\n        name=\"price\"\n        placeholder=\"Price\"\n        value={formData.price}\n        onChange={handleChange}\n        className=\"w-full border p-2 rounded\"\n        min={0}\n        required\n      />\n      <input\n        type=\"number\"\n        name=\"capacity\"\n        placeholder=\"Capacity\"\n        value={formData.capacity}\n        onChange={handleChange}\n        className=\"w-full border p-2 rounded\"\n        min={1}\n        required\n      />\n      <button\n        type=\"submit\"\n        className=\"bg-blue-600 text-white px-4 py-2 rounded\"\n      >\n        Submit\n      </button>\n    </form>\n  );\n};\n\nexport default EventForm;\n"],"names":[],"mappings":";;;;;AAAA;;;AAgBA,MAAM,YAAY,CAAC,EAAE,QAAQ,EAAE,WAAW,EAAkB;IAC1D,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,6NAAQ,EAAgB;QACtD,OAAO,aAAa,SAAS;QAC7B,aAAa,aAAa,eAAe;QACzC,MAAM,aAAa,QAAQ,IAAI,OAAO,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE;QACjE,OAAO,aAAa,SAAS;QAC7B,OAAO,aAAa,SAAS;QAC7B,UAAU,aAAa,YAAY;IACrC;IAEA,MAAM,eAAe,CACnB;QAEA,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,EAAE,MAAM;QAChC,YAAY;YACV,GAAG,QAAQ;YACX,CAAC,KAAK,EAAE,SAAS,WAAW,SAAS,aAAa,OAAO,SAAS;QACpE;IACF;IAEA,MAAM,eAAe,CAAC;QACpB,EAAE,cAAc;QAChB,SAAS;IACX;IAEA,qBACE,0PAAC;QAAK,UAAU;QAAc,WAAU;;0BACtC,0PAAC;gBACC,MAAK;gBACL,MAAK;gBACL,aAAY;gBACZ,OAAO,SAAS,KAAK;gBACrB,UAAU;gBACV,WAAU;gBACV,QAAQ;;;;;;0BAEV,0PAAC;gBACC,MAAK;gBACL,aAAY;gBACZ,OAAO,SAAS,WAAW;gBAC3B,UAAU;gBACV,WAAU;;;;;;0BAEZ,0PAAC;gBACC,MAAK;gBACL,MAAK;gBACL,OAAO,SAAS,IAAI;gBACpB,UAAU;gBACV,WAAU;gBACV,QAAQ;;;;;;0BAEV,0PAAC;gBACC,MAAK;gBACL,MAAK;gBACL,aAAY;gBACZ,OAAO,SAAS,KAAK;gBACrB,UAAU;gBACV,WAAU;gBACV,QAAQ;;;;;;0BAEV,0PAAC;gBACC,MAAK;gBACL,MAAK;gBACL,aAAY;gBACZ,OAAO,SAAS,KAAK;gBACrB,UAAU;gBACV,WAAU;gBACV,KAAK;gBACL,QAAQ;;;;;;0BAEV,0PAAC;gBACC,MAAK;gBACL,MAAK;gBACL,aAAY;gBACZ,OAAO,SAAS,QAAQ;gBACxB,UAAU;gBACV,WAAU;gBACV,KAAK;gBACL,QAAQ;;;;;;0BAEV,0PAAC;gBACC,MAAK;gBACL,WAAU;0BACX;;;;;;;;;;;;AAKP;uCAEe"}},
    {"offset": {"line": 134, "column": 0}, "map": {"version":3,"sources":["file:///var/www/html/Robin/next-event-booking/frontend/src/app/events/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport Link from \"next/link\";\nimport EventForm, { EventFormData } from \"@/components/EventForm\";\nimport { Event } from \"@/types\";\n\nconst RECORDS_PER_PAGE = 9;\n\nexport default function EventsPage() {\n  const [events, setEvents] = useState<Event[]>([]);\n  const [showForm, setShowForm] = useState(false);\n  const [token, setToken] = useState<string | null>(null);\n  const [currentPage, setCurrentPage] = useState(1);\n\n  useEffect(() => {\n    const storedToken = localStorage.getItem(\"token\");\n    setToken(storedToken || null);\n  }, []);\n\n  const fetchEvents = async () => {\n    try {\n      const res = await fetch(`${process.env.NEXT_PUBLIC_API_URL}/api/events`);\n      const data: Event[] = await res.json();\n      const sorted = data.sort(\n        (a, b) => new Date(b.date).getTime() - new Date(a.date).getTime()\n      );\n      setEvents(sorted);\n    } catch (err) {\n      console.error(\"Failed to fetch events:\", err);\n    }\n  };\n\n  useEffect(() => {\n    fetchEvents();\n  }, []);\n\n  const handleAddEvent = async (data: EventFormData) => {\n    if (!token) {\n      alert(\"You must be logged in to add events.\");\n      return;\n    }\n\n    try {\n      const res = await fetch(`${process.env.NEXT_PUBLIC_API_URL}/api/events`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${token}`,\n        },\n        body: JSON.stringify(data),\n      });\n\n      const newEvent: Event = await res.json();\n\n      if (res.ok) {\n        alert(\"Event added successfully!\");\n        setEvents((prev) =>\n          [...prev, newEvent].sort(\n            (a, b) => new Date(b.date).getTime() - new Date(a.date).getTime()\n          )\n        );\n        setShowForm(false);\n        setCurrentPage(1); // newest event is first\n      } else {\n        alert(newEvent?.title || \"Failed to add event.\");\n      }\n    } catch (err) {\n      console.error(err);\n      alert(\"Something went wrong.\");\n    }\n  };\n\n  // Pagination\n  const totalPages = Math.ceil(events.length / RECORDS_PER_PAGE);\n  const startIndex = (currentPage - 1) * RECORDS_PER_PAGE;\n  const paginatedEvents = events.slice(\n    startIndex,\n    startIndex + RECORDS_PER_PAGE\n  );\n\n  return (\n    <div className=\"p-6 max-w-4xl mx-auto\">\n      <h1 className=\"text-3xl font-bold mb-6 text-center\">All Events</h1>\n\n      {token ? (\n        <>\n          <button\n            className=\"mb-6 bg-green-600 text-white px-4 py-2 rounded\"\n            onClick={() => setShowForm(!showForm)}\n          >\n            {showForm ? \"Cancel\" : \"Add Event\"}\n          </button>\n          {showForm && <EventForm onSubmit={handleAddEvent} />}\n        </>\n      ) : (\n        <p className=\"text-center text-red-600 mb-6\">\n          You must be logged in to add events.\n        </p>\n      )}\n\n      {paginatedEvents.length ? (\n        <div className=\"grid sm:grid-cols-2 lg:grid-cols-3 gap-6 mt-6\">\n          {paginatedEvents.map((event) => (\n            <Link\n              key={event.id}\n              href={`/events/${event.id}`}\n              className=\"block p-4 bg-white rounded-2xl shadow hover:shadow-xl transition-shadow duration-300 hover:-translate-y-1 transform\"\n            >\n              <h2 className=\"text-lg font-semibold mb-2\">{event.title}</h2>\n              {event.date && (\n                <p className=\"text-gray-500 text-sm mb-1\">\n                  {new Date(event.date).toLocaleDateString()}\n                </p>\n              )}\n              {event.venue && (\n                <p className=\"text-gray-600 text-sm\">{event.venue}</p>\n              )}\n            </Link>\n          ))}\n        </div>\n      ) : (\n        <p className=\"text-center text-gray-500 mt-10\">No events found.</p>\n      )}\n\n      {totalPages > 1 && (\n        <div className=\"flex justify-center items-center gap-4 mt-6\">\n          <button\n            onClick={() => setCurrentPage((prev) => Math.max(prev - 1, 1))}\n            disabled={currentPage === 1}\n            className=\"px-4 py-2 bg-gray-200 rounded disabled:opacity-50\"\n          >\n            Previous\n          </button>\n          <span>\n            Page {currentPage} of {totalPages}\n          </span>\n          <button\n            onClick={() =>\n              setCurrentPage((prev) => Math.min(prev + 1, totalPages))\n            }\n            disabled={currentPage === totalPages}\n            className=\"px-4 py-2 bg-gray-200 rounded disabled:opacity-50\"\n          >\n            Next\n          </button>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}